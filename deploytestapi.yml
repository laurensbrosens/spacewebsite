---
# Maakt asp.net api docker container
- hosts: centosserver
  tasks:
  - name: Copy api project to centos to build debug version
    copy:
      src: ~/workspace/API pipeline/ProjectAPI
      dest: /home/s116277/Desktop/apibuild/
  - name: Build api
    community.docker.docker_image:
      name: projectapi
      build:
        path: /home/s116277/Desktop/apibuild/.
        args:
          build_version: 'Debug'
      source: build
  - name: Start new api test container
    docker_container:
      name: api
      image: projectapi
      state: started
      restart: yes
      ports:
        - 5001:80